- [Data Folder](#data-folder)
  - [Python setup](#python-setup)
  - [Data Dist Folder](#data-dist-folder)
  - [Data Collection Scripts](#data-collection-scripts)
    - [Ward Information Scraper - `scrape_wards.py`](#ward-information-scraper---scrape_wardspy)
  - [File Explainers](#file-explainers)
    - [The Main/Holistic File - `building-benchmarks.csv`](#the-mainholistic-file---building-benchmarkscsv)
    - [The Historical File - `benchmarking-all-years.csv`](#the-historical-file---benchmarking-all-yearscsv)
    - [City-Wide Stats - `building-benchmark-stats.json`](#city-wide-stats---building-benchmark-statsjson)
    - [Property Type Stats - `building-statistics-by-property-type.json`](#property-type-stats---building-statistics-by-property-typejson)
    - [Available Property Types - `property-types.json`](#available-property-types---property-typesjson)
    - [Alderperson Contact Information - `alders-info.csv`](#alderperson-contact-information---alders-infocsv)

(Generated using VSCode extension "Markdown All In One")

# Data Folder

This folder is for all of our data processing, including:

- `/analysis` - Jupyter research notebooks
- `/debug` - more readable debug data from running the data pipeline
- `/dist` - the files generated from our data pipeline, used by the actual site
- `/scripts` - all our data processing scripts
- `/source` - input files to our data pipeline, typically the latest benchmarking data

## Python setup

Install virtual environments to manage dependencies according to the guide in [Electrify-Chicago/PythonDev.md](../../PythonDev.md)

## Data Dist Folder

This directory contains files used for the actual built site. These are committed, since the city
data (and our data pipeline) changes infrequently.

**Important!** To keep things clean, keep this directory minimal, and make sure all files are
auto-generated when you run the data pipeline - any manual custom information should live in our
JS files in Gridsome, not in the data pipeline.

## Data Collection Scripts

### Ward Information Scraper - `scripts/scrape_wards.py`

This script scrapes accurate alderperson contact information from the official Chicago city website
(https://www.chicago.gov/city/en/about/wards/) for all 50 wards and generates `alders-info.csv` in
the `dist` directory.

**Usage:**

The script can be run from any directory:

```bash
# Run for all 50 wards (takes ~30 seconds)
python3 src/data/scripts/scrape_wards.py

# Test with ward 1 only (with debug output)
python3 src/data/scripts/scrape_wards.py --test

# Scrape specific wards only
python3 src/data/scripts/scrape_wards.py --wards 11,21,40,48
```

**Output:** `src/data/dist/alders-info.csv` - Contains name, email, phone, fax, office address, and website
for each alderperson. This file is also symlinked from `static/alders-info.csv` so the frontend can
fetch it directly.

**Why this script?** The alderperson information changes periodically due to elections and staff
changes. This script ensures we can easily refresh the data from the official source rather than
maintaining outdated information manually.

## File Explainers

### The Main/Holistic File - `building-benchmarks.csv`

This file contains one row for each building, and contains information for the latest year they
submitted data. This file has the most columns, because it includes overall and by property type
rankings (e.g. #1 highest GHG in the city, #3 highest GHG among Office), but the fewest rows.

### The Historical File - `benchmarking-all-years.csv`

Contains one row for each building per year of data in the source data, with a limited set of
columns we track over time. This file has the most rows, and is only used on the building details
page to show historical trends in things like electric & gas use, emissions, etc.

### City-Wide Stats - `building-benchmark-stats.json`

Statistics on the overall data set of buildings across a number of properties, for example the
average GHG emissions, intensity, and gas use among all benchmark buildings.

### Property Type Stats - `building-statistics-by-property-type.json`

A larger JSON file of the same city-wide statistics, but by each property type. For example, the
average, min and max electric and gas use among buildings with type 'Office'.

### Available Property Types - `property-types.json`

The property types in benchmark data - for the front-end to show filters.

### Alderperson Contact Information - `alders-info.csv`

Contains contact information for all 50 Chicago ward alderpersons, including name, email, phone
number, fax, office address, City Hall address, and website. This file is generated by the
`scrape_wards.py` script and should be refreshed periodically to keep contact information accurate,
especially after elections or when alderpersons update their contact details.
